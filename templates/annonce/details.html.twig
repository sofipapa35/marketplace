{% extends 'base.html.twig' %}

{% block title %}Hello AnnonceController!
{% endblock %}

{% block body %}
	<div class="d-md-flex">
		<div class="col-md-4">
			<img src="{{asset('/img/image/' ~ annonce.imageName)}}" alt="{{annonce.titre}}" class="img-fluid">
		</div>
		<div>
			<h3>
				<b>{{annonce.titre|capitalize}}</b>
			</h3>
			<div class="text-end text-secondary">
				<small>Créé le
					{{annonce.createdAt|date('d-m-Y')}}</small><br>
				{% if annonce.updatedAt %}
					<small>Mis à jour le
						{{annonce.updatedAt|date('d-m-Y')}}</small><br>
				{% endif %}
				{% if annonce.user.pseudo %}
					<small>Publiée par
						{{annonce.user.pseudo}}</small>
				{% else %}
					<small>Publiée par
						{{annonce.user.prenom}}</small>
				{% endif %}
			</div>
			<div>
				<div class="py-3">{{annonce.prix|number_format(2)}}
					€</div>
				<hr>
				<h5 class="py-3">
					<b>Desctiption</b>
				</h5>
				<div>
					{{annonce.description|capitalize|raw}}
				</div>
			</div>
		</div>
	</div>
	<div>

		{% if relatives|length > 0 %}
			<div class="my-5">
				<h4>Vous pouvez aimez aussi</h4>
				<div class="d-flex flex-wrap">
					{% for r in relatives %}
						<a href="{{path('annonce-detail', {id: r.id})}}" class="col-6 col-md-2 p-1 card img">
							<img src="{{asset('/img/image/' ~ r.imageName)}}" alt="{{r.titre}}" class="img-fluid">
						</a>
					{% endfor %}
				</div>
			</div>
		{% endif %}
		<h4>Postes</h4>
		{% if annonce.postes %}
			{% for poste in annonce.postes %}
				<div class="div-poste">
					<div class="d-md-flex justify-content-between">
						<div class="text-secondary">{{poste.user.pseudo ? poste.user.pseudo : poste.user.prenom}}</div>
						<div class="text-secondary">Créé le :
							{{poste.createdAt|date('d-m-Y')}}</div>
					</div>
					<hr>
					<div>{{poste.texte}}</div>
				</div>
			{% endfor %}
		{% else %}
			<h5>Il n'y a pas des postes</h5>
		{% endif %}

	{% endblock %}
